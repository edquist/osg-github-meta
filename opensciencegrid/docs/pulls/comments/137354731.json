{
  "_links": {
    "html": {
      "href": "https://github.com/opensciencegrid/docs/pull/34#discussion_r137354731"
    }, 
    "pull_request": {
      "href": "https://api.github.com/repos/opensciencegrid/docs/pulls/34"
    }, 
    "self": {
      "href": "https://api.github.com/repos/opensciencegrid/docs/pulls/comments/137354731"
    }
  }, 
  "author_association": "OWNER", 
  "body": "The `<em>`...`</em>` is showing up literally", 
  "commit_id": "9098f4a12897d57f272ece51c644251662ab0764", 
  "created_at": "2017-09-06T18:38:08Z", 
  "diff_hunk": "@@ -0,0 +1,223 @@\n+Installing and Using the RSV GlideinWMS Tester\n+==============================================\n+\n+\n+About This Guide\n+----------------\n+\n+The RSV GlideinWMS Tester (or *Tester*, in this document) is a tool that a VO front-end administrator can use to test remote sites for the ability to run the VO\u2019s jobs. It is particularly useful when setting up a VO for the first time or when changing the sites at which a VO\u2019s jobs can run. For a site to pass the test, it must successfully run a simple test job via the normal GlideinWMS mechanisms, in much the same way as a real VO job.\n+\n+Use this page to learn how to install, configure, and use the Tester for your VO front-end.\n+\n+Before Starting\n+---------------\n+\n+Before starting the installation process, consider the following points (consulting [the Reference section below](#ReferenceSection) as needed):\n+\n+- **Software:** You must have [a GlideinWMS Front-end](InstallGlideinWMSFrontend) installed\n+- **Configuration:** The GlideinWMS Front-end must be configured (a) [to have at least one group that matches pilots to sites using DESIRED_SITES](InstallGlideinWMSFrontend#DesiredSites), and (b) [to support the is_itb user job attribute](InstallGlideinWMSFrontend#IsItb)\n+- **Host choice:** The Tester should be installed on its own host; a small Virtual Machine (VM) is ideal\n+- **Service certificate:** The Tester requires a host certificate at `/etc/grid-security/hostcert.pem` and an accompanying key at `/etc/grid-security/hostkey.pem`\n+- **Network ports:** Test jobs must be able to contact the tester using the HTCondor Shared Port on port 9615 (TCP), and you must be able to contact a web server on port 80 (TCP) to view test results.\n+\n+\n+\n+Installing the Tester\n+---------------------\n+\n+The Tester software takes advantage of several other OSG software components, so the installation will also include OSG\u2019s site validation system (RSV), HTCondor, and the GlideinWMS pilot submission software.\n+\n+```console\n+[root@client ~] # yum install rsv-gwms-tester\n+```\n+\n+Configuring the Tester\n+----------------------\n+\n+Before you use the Tester, there are some one-time configuration steps to complete, one set on your GlideinWMS Front-end Central Manager host and one set on the Tester host.\n+\n+### Configuring the GlideinWMS Front-end Central Manager\n+\n+Complete these steps **on your GlideinWMS Front-end Central Manager host**:\n+\n+1. Authorize the Tester host to connect to your Central Manager:\n+     \n+        :::console\n+        [root@client ~] # glidecondor_addDN -allow-others -daemon %RED%<COMMENT> <TESTER_DN>%ENDCOLOR% condor\n+\n+\n+     Where `COMMENT` is a human-readable label for the Tester host (e.g., \u201cRSV GWMS Tester at myhost\u201d), and `TESTER_DN` is the Distinguished Name (DN) of the host certificate of your Tester host. Most likely, you will need to quote both of these values to protect them from the shell. For example:\n+\n+        :::console\n+        [root@client ~] # glidecondor_addDN -allow-others -daemon 'RSV GWMS Tester on Fermicloud' '/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=fermicloud357.fnal.gov' condor\n+\n+2. Restart HTCondor to apply the changes\n+\n+    On **EL\u00a06** systems:\n+  \n+        :::console\n+        [root@client ~] # service condor restart\n+    \n+    On **EL\u00a07** systems:\n+\n+        :::console\n+        [root@client ~] # systemctl restart condor\n+\n+3. Add the new Tester to your GlideinWMS front-end configuration. \n+   Edit the file `/etc/gwms-frontend/frontend.xml` and add a line as follows within the `<schedds>` element\n+\n+        :::file\n+        <schedd DN=\"%RED%<TESTER_DN>%ENDCOLOR%\" fullname=\"%RED%<TESTER_HOSTNAME>%ENDCOLOR%\">\n+\n+     Where `TESTER_DN` is the Distinguished Name (DN) of the host certificate of your Tester host (as above), and `TESTER_HOSTNAME` is the fully qualified hostname of the Tester host. For example:\n+\n+        :::file \n+        <schedd DN=\"/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=fermicloud357.fnal.gov\" fullname=\"fermicloud357.fnal.gov\">\n+   \n+     Reconfigure your GlideinWMS front-end to apply the changes:\n+      \n+        :::console\n+        [root@client ~] # service gwms-frontend reconfig\n+\n+### Configuring the Tester host\n+\n+Complete the following steps **on your Tester host**:\n+\n+1. Configure the Tester for the VOs that your Front-end supports\n+   \n+    Edit the file `/etc/rsv/metrics/org.osg.local-gfactory-site-querying-local.conf`. The `constraint` line is an HTCondor ClassAd expression containing one `stringListMember` function per VO that your Front-end supports. If there is more than one VO, the function invocations are joined by the \u201clogical or\u201d operator, `||`. Edit the `constraint` line for your Front-end.\n+\n+    For example, for a single VO named `Foo`, the line would be:\n+\n+        :::file\n+        constraint = stringListMember(\"Foo\", GLIDEIN_Supported_VOs)\n+\n+    For two VOs named `Foo` and `Bar`, the line would be:\n+\n+        :::file\n+        constraint = stringListMember(\"Foo\", GLIDEIN_Supported_VOs) || stringListMember(\"Bar\", GLIDEIN_Supported_VOs)\n+\n+    Do not change the other settings in this file, unless you have clear and specific reasons to do so.\n+\n+2. Authorize the central manager of your Front-end to connect to the tester host:\n+\n+        :::console\n+        [root@client ~] # glidecondor_addDN -allow-others -daemon %RED%<COMMENT> <CENTRAL_MGR>%ENDCOLOR% condor\n+\n+    Where `COMMENT` is a human-readable identifier for the Central Manager, and `CENTRAL_MGR` is the Distinguished Name (DN) of the host certificate of your GlideinWMS Front-end\u2019s Central Manager host. Most likely, you will need to quote both of these values to protect them from the shell. For example:\n+\n+        :::console\n+        [root@client ~] # glidecondor_addDN -allow-others -daemon 'UCSD central manager DN' '/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=osg-ligo-1.t2.ucsd.edu' condor\n+\n+3. Configure the special HTCondor-RSV instance with your host IP address.\n+   \n+    Create the file `/etc/condor/config.d/98_public_interface.config` with this content:\n+\n+        :::file\n+        NETWORK_INTERFACE = %RED%<ADDRESS>%ENDCOLOR%\n+        CONDOR_HOST = %RED%<CENTRAL_MGR>%ENDCOLOR%\n+\n+    Where `ADDRESS` is the IP address of your Tester host, and `CENTRAL_MGR` is the hostname of your GlideinWMS Front-end Central Manager.\n+\n+4. Enable the Tester\u2019s RSV probe:\n+\n+        :::console\n+        [root@client ~] # rsv-control --enable org.osg.local-gfactory-site-querying-local --host localhost\n+\n+Using the Tester\n+----------------\n+\n+There are at least two aspects of using the Tester:\n+\n+-   Managing the services that are associated with the Tester software\n+-   Viewing results from the Tester\n+\n+### Managing Tester services\n+\n+Because the Tester is built on other OSG software, there are a number of services in your installation. The specific services are:\n+\n+\n+| Software           | Service name  | Notes                      |\n+|:-------------------|:--------------|:---------------------------|\n+| Apache HTTP Server | `httpd`       | Web server for results     |\n+| HTCondor-Cron      | `condor-cron` | cron-like jobs in HTCondor |\n+| RSV                | `rsv`         | OSG site validator         |\n+\n+\n+### Viewing Tester results\n+\n+Once the Tester RSV probe is enabled and active, and the services listed above have been started, there are two kinds of RSV probes that run periodically:\n+\n+-   One probe asks the GlideinWMS factory for the up-to-date list of sites supported by your VO(s)\u00a0\u2014 runs every 30 minutes\n+-   One probe submits and monitors one test job to each site supported by your VO(s)\u00a0\u2014 run every 60 minutes\n+\n+You can view the latest results of both probe types on an RSV results web page, or you can manually run the first probe to see the full list of sites.\n+\n+#### Viewing RSV results online\n+\n+To see the latest results, access `https://<em>HOSTNAME</em>/rsv/` (where `HOSTNAME` is the name of your Tester host).", 
  "html_url": "https://github.com/opensciencegrid/docs/pull/34#discussion_r137354731", 
  "id": 137354731, 
  "original_commit_id": "a41f020dbcd224fc1e7fdb3cbb3395868039d565", 
  "original_position": 158, 
  "path": "docs/monitoring/rsv-gwms-tester.md", 
  "position": null, 
  "pull_request_review_id": 61010658, 
  "pull_request_url": "https://api.github.com/repos/opensciencegrid/docs/pulls/34", 
  "updated_at": "2017-09-06T19:01:38Z", 
  "url": "https://api.github.com/repos/opensciencegrid/docs/pulls/comments/137354731", 
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/5246893?v=4", 
    "events_url": "https://api.github.com/users/matyasselmeci/events{/privacy}", 
    "followers_url": "https://api.github.com/users/matyasselmeci/followers", 
    "following_url": "https://api.github.com/users/matyasselmeci/following{/other_user}", 
    "gists_url": "https://api.github.com/users/matyasselmeci/gists{/gist_id}", 
    "gravatar_id": "", 
    "html_url": "https://github.com/matyasselmeci", 
    "id": 5246893, 
    "login": "matyasselmeci", 
    "organizations_url": "https://api.github.com/users/matyasselmeci/orgs", 
    "received_events_url": "https://api.github.com/users/matyasselmeci/received_events", 
    "repos_url": "https://api.github.com/users/matyasselmeci/repos", 
    "site_admin": false, 
    "starred_url": "https://api.github.com/users/matyasselmeci/starred{/owner}{/repo}", 
    "subscriptions_url": "https://api.github.com/users/matyasselmeci/subscriptions", 
    "type": "User", 
    "url": "https://api.github.com/users/matyasselmeci"
  }
}
