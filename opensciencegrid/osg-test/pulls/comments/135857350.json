{
  "_links": {
    "html": {
      "href": "https://github.com/opensciencegrid/osg-test/pull/93#discussion_r135857350"
    }, 
    "pull_request": {
      "href": "https://api.github.com/repos/opensciencegrid/osg-test/pulls/93"
    }, 
    "self": {
      "href": "https://api.github.com/repos/opensciencegrid/osg-test/pulls/comments/135857350"
    }
  }, 
  "author_association": "OWNER", 
  "body": "So there's some osg-test configuration options that do not have command line options?", 
  "commit_id": "f648d1fba3bc5f92492769ef1599d6419c683e7d", 
  "created_at": "2017-08-29T17:25:14Z", 
  "diff_hunk": "@@ -24,9 +27,107 @@ Other testing frameworks often support fixtures, which bracket a set of tests wi\n -   All operations are expressed as tests, including installation, configuration, service start/stop, etc.\n -   Tests should express requirements clearly and simply, so that distributed team of developers can work independently and with minimal confusion.\n \n+Running the OSG Automated Tests\n+-------------------------------\n+\n+**WARNING!** The tests and associated test framework run as `root` and may destroy your system! It is **strongly** recommended that `osg-test` be run only on \u201cdisposable\u201d systems \u2014 ones that can be reimaged or reinstalled from scratch with little effort. Virtual machines are ideal for this kind of test.\n+\n+All steps are performed as `root`:\n+\n+1.  Clone the git repository and `cd` into it:\n+\n+        [root@client ~ ] $ git clone https://github.com/brianhlin/osg-test.git\n+        [root@client ~ ] $ cd osg-test\n+\n+2.  Bootstrap the test system using the `osg-testing` yum repository. The `osg release` is required as the first argument and takes the form of '<major version>.<minor version>' e.g. `3.2`. To get `osg-test` from the `osg-development` Yum repository, replace the second argument with `development`; to get `osg-test` from the production repository, omit the second argument. This step makes sure that both the EPEL and OSG repositories are available, then installs and verifies the `osg-test` package itself.\n+\n+        [root@client ~] $ ./bootstrap-osg-test <osg release> testing\n+\n+3.  Run the tests (see below for options). Be sure to direct the stdout/stderr to a file to get all the information from the test run (the dump-file option only outputs some of the output to a file): \n+\n+        [root@client ~] $ osg-test -vadi <PACKAGE> -r osg-testing > <output file> 2>&1\n+\n+`osg-test` Usage\n+----------------\n+\n+Fundamentally, the `osg-test` script runs tests and reports on their results. However, the script can also perform many of the housekeeping tasks associated with setting up and tearing down the test environment, including adding (and later removing) a test user and its X.509 certificate, installing (and later removing) one or more RPMs, and so on. The following options are available:\n+\n+| Option                       | Description                                                                                                                                                                                                                                |\n+|------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n+| `-a`, `--add-user`           | Add and configure the test user account (see also `-u` below). By default, the script assumes that the test user account already exists and is configured with a valid X.509 certificate in its `.globus` directory.                       |\n+| `--cilogon`                  | Generate CILogon-like certificates                                                                                                                                                                                                         |\n+| `-c`, `--config` FILE        | Configuration file to use that specifies command-line options. See below for syntax                                                                                                                                                        |\n+| `-d`, `--dump-output`        | After all test output, print all commands and their output from the test run. Typically generates **a lot** of output.                                                                                                                     |\n+| `--df`, `--dump-file` FILE   | Like `--dump-output`, but prints the output to a file instead of the console                                                                                                                                                               |\n+| `-e`, `--exit-on-fail`       | Stop tests on first failure and output the results                                                                                                                                                                                         |\n+| `-g`, `--update-repo` REPO   | Enable the given repository when using yum to update packages. Use actual repo names, such as `osg-testing` and `osg-development`.                                                                                                         |\n+| `-i`, `--install` PACKAGE    | Before running tests, use `yum` to install the given package; may be specified more than once to install more than one top-level package. By default, the script assumes that the user has installed all packages to be tested in advance. |\n+| `-m`, `--manual-run`         | Speeds up osg-test in the case where it is run by hand. May not be suitable when running multiple instances of osg-test at once.                                                                                                           |\n+| `-n`, `--no-cleanup`         | Do not run clean-up steps. Opposite of `--cleanup`                                                                                                                                                                                         |\n+| `-p`, `--password` PASSWORD  | Password for the grid certificate of the test user. Defaults to the password that works with the X.509 certificate for the default test user.                                                                                              |\n+| `-s`, `--securepass`         | Prompt for the password instead of specifying it in the command line.                                                                                                                                                                      |\n+| `-r`, `--extra-repo` REPO    | Enable the given extra repository (in addition to production) when using yum to install packages. Use actual repo names, such as `osg-testing` and `osg-development`. Can be used multiple times with different repositories.              |\n+| `--update-release` RELEASE   | OSG release version (e.g. 3.2) to use when updating packages specified with -i.                                                                                                                                                            |\n+| `--tarballs`                 | Test client tarballs instead of RPM-based installation.                                                                                                                                                                                    |\n+| `--tarball-test-dir`         | The location of the tarball test files (if non-standard).                                                                                                                                                                                  |\n+| `--no-print-test-name`       | Do not print test name before command output                                                                                                                                                                                               |\n+| `--hostcert`                 | Create host cert                                                                                                                                                                                                                           |\n+| `-T`, `--no-tests`           | Skip running the tests themselves. Useful for running/testing just the set-up and/or clean-up steps.                                                                                                                                       |\n+| `-u`, `--test-user` USERNAME | Use the test user account with the given name. See also the `-a` and `-p` options.                                                                                                                                                         |\n+| `-v`, `--verbose`            | Print the name of each test as it is run; generally a good idea.                                                                                                                                                                           |\n+| `-h`, `--help`               | Print usage information and exit.                                                                                                                                                                                                          |\n+| `--version`                  | Print the script version and exit.                                                                                                                                                                                                         |\n+\n+### Config file syntax ###\n+\n+Unfortunately, the names of the variables in the config file are not the same as their names on the command line. Below is a translation table and an example config file.\n+\n+| Command-Line         | Config File   | Default Value |\n+|:---------------------|:--------------|:--------------|\n+| --add-user           | adduser       | False         |\n+| --cilogon            | cilogon       | True          |\n+| --dump-output        | dumpout       | False         |\n+| --dump-file          | dumpfile      | None          |\n+| --extra-repo         | extrarepos    | []            |\n+| --exit-on-fail       | exitonfail    | False         |\n+| --update-repo        | updaterepos   | []            |\n+| --install            | packages      | []            |\n+| --manual-run         | manualrun     | False         |\n+| --no-cleanup         | skip_cleanup  | False         |\n+| --no-print-test-name | printtest     | False         |\n+| --password           | password      | vdttest       |\n+| --securepass         | securepass    | False         |\n+| --update-release     | updaterelease | None          |\n+| --tarballs           | tarballs      | False         |\n+| --no-tests           | skiptests     | False         |\n+| --test-user          | username      | vdttest       |\n+| --verbose            | verbose       | False         |\n+|                      | backupmysql   | False         |\n+|                      | hostcert      | False         |\n+|                      | nightly       | False         |\n+|                      | selinux       | False         |", 
  "html_url": "https://github.com/opensciencegrid/osg-test/pull/93#discussion_r135857350", 
  "id": 135857350, 
  "original_commit_id": "f648d1fba3bc5f92492769ef1599d6419c683e7d", 
  "original_position": 97, 
  "path": "README.md", 
  "position": 97, 
  "pull_request_review_id": 59318188, 
  "pull_request_url": "https://api.github.com/repos/opensciencegrid/osg-test/pulls/93", 
  "updated_at": "2017-08-29T17:25:28Z", 
  "url": "https://api.github.com/repos/opensciencegrid/osg-test/pulls/comments/135857350", 
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/79268?v=4", 
    "events_url": "https://api.github.com/users/djw8605/events{/privacy}", 
    "followers_url": "https://api.github.com/users/djw8605/followers", 
    "following_url": "https://api.github.com/users/djw8605/following{/other_user}", 
    "gists_url": "https://api.github.com/users/djw8605/gists{/gist_id}", 
    "gravatar_id": "", 
    "html_url": "https://github.com/djw8605", 
    "id": 79268, 
    "login": "djw8605", 
    "organizations_url": "https://api.github.com/users/djw8605/orgs", 
    "received_events_url": "https://api.github.com/users/djw8605/received_events", 
    "repos_url": "https://api.github.com/users/djw8605/repos", 
    "site_admin": false, 
    "starred_url": "https://api.github.com/users/djw8605/starred{/owner}{/repo}", 
    "subscriptions_url": "https://api.github.com/users/djw8605/subscriptions", 
    "type": "User", 
    "url": "https://api.github.com/users/djw8605"
  }
}
